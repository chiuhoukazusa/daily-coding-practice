# 体积光渲染（Volumetric Lighting / God Rays）

## 项目成果

成功实现真实的体积光效果（丁达尔效应），光线穿过有雾气/灰尘的空间产生可见光束。

## 技术方案

### Ray Marching（光线步进）
- 从相机发射光线
- 沿光线步进采样（60步）
- 每个采样点计算到光源的可见性（阴影测试）
- 累积散射光强度
- 光照衰减：距离平方衰减

### 关键参数
- **步进数**: 60（平衡性能与质量）
- **散射系数**: 0.03（控制雾气密度，越大越明显）
- **光照强度**: 1.2倍（温暖的阳光）
- **衰减系数**: 距离平方衰减

## 渲染效果

**对比分析**:
- 无体积光均值: 17.06（深色背景）
- 有体积光均值: 56.40（光束清晰可见）
- 差异均值: 39.33（效果明显）

**场景设置**:
- 3个球体作为遮挡物
- 光源位置: 右上前方 (5, 4, 2)
- 相机位置: (0, 0, 5)

## 文件说明

- `god_rays_v2.cpp` - 主程序（包含场景、光照、体积光）
- `test_pure.cpp` - 纯体积光测试（无遮挡）
- `scene_no_vol.png` - 普通渲染
- `scene_with_vol.png` - 体积光渲染
- `god_rays_comparison.png` - 对比图

## 编译运行

```bash
g++ -std=c++17 -O3 god_rays_v2.cpp -o god_rays_v2
./god_rays_v2
```

渲染时间: ~1.4秒 (1200x800, 60步)
